{% extends "page.basic.html" %}

{% block title %}{{ label }} in {{ args.name|default('Filtered HXL data') }} ({{ type }} chart){% endblock %}

{% block main %}
    <h1>{{ label }} in {{ args.name|default('Filtered HXL data') }} ({{ type }} chart)</h1>

    <p>
      <a href="?tag={{ urltag(tag) }}&amp;label={{ urltag(label) }}&amp;type=pie">Pie</a> |
      <a href="?tag={{ urltag(tag) }}&amp;label={{ urltag(label) }}&amp;type=column">Column</a> |
      <a href="?tag={{ urltag(tag) }}&amp;label={{ urltag(label) }}&amp;type=bar">Bar</a>
    </p>

    <div id="chart_div" style="height:480px"></div>

    <p>
      <a href="/data/{{ key }}.csv">Download CSV</a> |
      <a href="/data/{{ key }}.json">Download JSON</a>
    </p>
{% endblock %}

{% block scripts %}
    <script type="text/javascript">
      var csv_url = "/data/{{ key }}.csv";
      var chart_type = "{{ type }}";
      var chart_value_tag = "{{ tag }}";
      var chart_label_tag = "{{ label }}";
      var chart_filter_tag = "{{ filter }}";
    </script>
{{ super() }}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="{{ static('jquery.csv.js') }}"></script>
    <script type="text/javascript" src="{{ static('hxl.js') }}"></script>
    <script type="text/javascript" src="{{ static('show-chart.js') }}"></script>
{% endblock %}
