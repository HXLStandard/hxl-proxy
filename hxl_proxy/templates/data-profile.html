<!DOCTYPE html>
<html lang="en">
  {% from 'macros/selectors.html' import selectors %}
  {% set facet='profile' %}
  <head>
    <title>Edit metadata @ HXL Proxy</title>
    {% include "snippets/headers.html" %}
  </head>
  <body class="container-fluid">
    {% include "snippets/navbar.html" %}
    <header>
      {% include "snippets/edittabs.html" %}
      <h1>
        {% if key %}
        Metadata for {{ profile.title }}
        {% else %}
        Save recipe
        {% endif %}
      </h1>
    </header>
    <main class="row">
      <div class="col-md-12">
        {% include "snippets/source.html" %}
      </div>
      <form class="form" method="POST" action="/actions/save-profile">
        <div class="form-group required col-md-6">
          <label for="name">Recipe name</label>
          <input name="name" required="required" class="form-control" value="{{ profile.name|nonone }}" />
        </div>
        <div class="form-group col-md-6">
          <label for="description">Short description</label>
          <textarea name="description" class="form-control">{{ profile.description|nonone }}</textarea>
        </div>
        <div class="form-group col-md-6">
          <label for="stub">
            Basename for download (will add extension like .csv).
          </label>
          <input name="stub" class="form-control" value="{{ profile.stub|nonone }}" />
        </div>
        <div class="form-group col-md-6">
          <label for="schema_url">Default schema URL for validation</label>
          <input name="schema_url" id="schema_url" class="form-control" value="{{ profile.args.schema_url|nonone }}" />
          {{ selectors('#schema_url') }}
        </div>
        <div class="form-group col-md-6{% if not key %} required{% endif %}">
          <label for="password">Editing password</label>
          <input name="password" type="password"{% if not key %} required="required"{% endif %} class="form-control" />
        </div>
        <div class="form-group col-md-6{% if not key %} required{% endif %}">
          <label for="password-repeat">Editing password (repeat)</label>
          <input name="password-repeat" type="password"{% if not key %} required="required"{% endif %} class="form-control" />
        </div>
        <div class="checkbox form-group col-md-6">
          <label>
            <input name="cloneable" type="checkbox"{% if profile.cloneable or (not key) %} checked="checked"{% endif %} />
            Users may clone (will expose original URL)
          </label>
        </div>
        <div class="form-group col-md-6">
          <button type="submit" class="btn btn-success">Save this filter</button>
        </div>
        {% if key %}
        <input type="hidden" name="key" value="{{ key }}" />
        {% endif %}
        {% include "snippets/params.html" %}
      </form>
    </main>
    {% include "snippets/scripts.html" %}
    {% include "snippets/chooser-scripts.html" %}
  </body>
</html>
